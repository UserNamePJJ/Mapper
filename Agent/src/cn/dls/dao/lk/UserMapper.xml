<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.dls.dao.lk.UserMapper">
	<!-- 登录 -->
	<select id="login" resultType="User">
		select * from user where username=#{username} and
		userpassword=#{userpassword}
	</select>
	
	<!-- 查看用户列表 -->
	<select id="getUserList" resultType="User">
		SELECT u.*,r.`rolename` userRoleName FROM `user` u,`role` r  
		WHERE u.`roleid` =r.`roleid` 
		<if test="username!=null and username!=''">
			AND `username` like CONCAT ('%',#{username},'%')
		</if>
		<if test="monetary!=null and monetary!=''">
		AND `monetary` &lt; #{monetary}
		</if>
		and u.`roleid`=5
	</select>
	
	<!-- 查看代理商列表 -->
	<select id="getAgentList" resultType="User">
		SELECT u.*,r.`rolename` userRoleName FROM `user` u,`role` r  
		WHERE u.`roleid` =r.`roleid` 
		<if test="username!=null and username!=''">
			AND `username` like CONCAT ('%',#{username},'%')
		</if>
		<if test="monetary!=null and monetary!=''">
		AND `monetary` = #{monetary}
		</if>
		AND u.`roleid` IN (2,3,4)
	</select>
	
	<delete id="delAgentById" parameterType="int">
	DELETE FROM `user` WHERE `userid`=#{userid}
	</delete>
</mapper>
